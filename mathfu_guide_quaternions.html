<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>MathFu: Quaternions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,700" rel="stylesheet">
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="commonprojectlogo">
    <img alt="Logo" src="fpl_logo_small.png"/>
  </td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">MathFu
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="usergroup0.html"><span>Programmer's&#160;Guide</span></a></li>
      <li><a href="mathfu_api_reference.html"><span>API&#160;reference</span></a></li>
      <li><a href="mathfu_readme.html"><span>readme</span></a></li>
      <li><a href="contributing.html"><span>contributing</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('mathfu_guide_quaternions.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Quaternions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="http://en.wikipedia.org/wiki/Quaternion">Quaternions</a> provide a representation of a 3-dimensional orientation or rotation. <a href="http://en.wikipedia.org/wiki/Quaternion">Quaternions</a> are especially useful when interpolating between angles to avoid <a href="http://en.wikipedia.org/wiki/Gimbal_lock">Gimbal lock</a>. For more information, see <a href="http://en.wikipedia.org/wiki/Quaternion">this description</a>.</p>
<p><a class="el" href="index.html#mathfu_overview">MathFu</a> implements a quaternion as the <a class="el" href="classmathfu_1_1_quaternion.html">Quaternion</a> class template which is constructed from one 3-dimensional <a class="el" href="classmathfu_1_1_vector.html">Vector</a> and scalar component. The <a class="el" href="classmathfu_1_1_quaternion.html">Quaternion</a> template is intended to be instanced with <code>float</code> or <code>double</code> floating point scalar types.</p>
<h1><a class="anchor" id="mathfu_guide_quaternions_declaration"></a>
Declaration</h1>
<p>The <a href="http://en.wikipedia.org/wiki/Quaternion">Quaternions</a> template takes a single argument which specifies the floating point type of each element in the class:</p>
<div class="fragment"><div class="line"><a class="code" href="classmathfu_1_1_quaternion.html">mathfu::Quaternion&lt;float&gt;</a> quaternion;</div>
</div><!-- fragment --><h2><a class="anchor" id="mathfu_guide_quaternions_initialization"></a>
Initialization</h2>
<p>For efficiency, <a class="el" href="classmathfu_1_1_quaternion.html">Quaternion</a> is uninitialized when constructed. Constructors are provided to initialize the class from a set of scalars, a 3-dimensional <a class="el" href="classmathfu_1_1_vector.html">Vector</a> and a scalar or another <a class="el" href="classmathfu_1_1_quaternion.html">Quaternion</a>.</p>
<p>For example, to initialize a <a class="el" href="classmathfu_1_1_quaternion.html">Quaternion</a> using a set of scalars:</p>
<div class="fragment"><div class="line"><a class="code" href="classmathfu_1_1_quaternion.html">mathfu::Quaternion&lt;float&gt;</a> quaternion(0.71f, 0.0f, 0.71f, 0.0f);</div>
</div><!-- fragment --><p>To initialize a <a class="el" href="classmathfu_1_1_quaternion.html">Quaternion</a> from a scalar and 3-dimensional vector component:</p>
<div class="fragment"><div class="line"><a class="code" href="classmathfu_1_1_quaternion.html">mathfu::Quaternion&lt;float&gt;</a> quaternion(</div>
<div class="line">    0.50f, <a class="code" href="classmathfu_1_1_vector.html">mathfu::vec3</a>(0.76f, 0.38f, 0.19f));</div>
</div><!-- fragment --><h1><a class="anchor" id="mathfu_guide_quaternions_accessors"></a>
Accessors</h1>
<p><a class="el" href="classmathfu_1_1_quaternion.html">Quaternion</a> provides an array operator to retrieve elements of the object. The first index is the scalar component with the remaining 3 indices referring to elements in the vector component.</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <a class="code" href="classmathfu_1_1_quaternion.html">mathfu::Quaternion&lt;float&gt;</a> quaternion(</div>
<div class="line">    0.50f, <a class="code" href="classmathfu_1_1_vector.html">mathfu::vec3</a>(0.76f, 0.38f, 0.19f));</div>
<div class="line"><span class="keywordtype">float</span> s = quaternion[0];</div>
<div class="line"><span class="keywordtype">float</span> x = quaternion[1];</div>
<div class="line"><span class="keywordtype">float</span> y = quaternion[2];</div>
<div class="line"><span class="keywordtype">float</span> z = quaternion[3];</div>
</div><!-- fragment --><h2><a class="anchor" id="mathfu_guide_quaternions_assignment"></a>
Assignment</h2>
<p>The array operator returns a reference to an element in the <a class="el" href="classmathfu_1_1_quaternion.html">Quaternion</a> which can be updated:</p>
<div class="fragment"><div class="line"><a class="code" href="classmathfu_1_1_quaternion.html">mathfu::Quaternion&lt;float&gt;</a> quaternion;</div>
<div class="line">quaternion[0] = 0.5f;</div>
<div class="line">quaternion[1] = 0.76f;</div>
<div class="line">quaternion[2] = 0.38f;</div>
<div class="line">quaternion[3] = 0.19f;</div>
</div><!-- fragment --><h1><a class="anchor" id="mathfu_guide_quaternions_repr"></a>
Converting Between Representations</h1>
<p><a class="el" href="classmathfu_1_1_quaternion.html">Quaternion</a> provides a number of ways to create a rotation or orientation:</p>
<ul>
<li><a class="el" href="classmathfu_1_1_quaternion.html#a6cbfc5dde67e0d0afe15d37e6af7e27b">Quaternion::FromAngleAxis()</a></li>
<li><a class="el" href="classmathfu_1_1_quaternion.html#a59928755b55306906b405db67222ee7e">Quaternion::FromEulerAngles()</a></li>
<li><a class="el" href="classmathfu_1_1_quaternion.html#afedab9d5094058f445f1be76d01677fa">Quaternion::FromMatrix()</a></li>
</ul>
<p>For example, to create a <a class="el" href="classmathfu_1_1_quaternion.html">Quaternion</a> which rotates PI / 2 radians around the X-axis:</p>
<div class="fragment"><div class="line"><a class="code" href="classmathfu_1_1_quaternion.html">mathfu::Quaternion&lt;float&gt;</a> quaternion =</div>
<div class="line">    <a class="code" href="classmathfu_1_1_quaternion.html#a6cbfc5dde67e0d0afe15d37e6af7e27b">mathfu::Quaternion&lt;float&gt;::FromAngleAxis</a>(</div>
<div class="line">        M_PI / 2.0f, <a class="code" href="classmathfu_1_1_vector.html">mathfu::vec3</a>(1.0f, 0.0f, 0.0f));</div>
</div><!-- fragment --><p>The rotation of PI / 2 radians around the X-axis can also be achieved with:</p>
<div class="fragment"><div class="line"><a class="code" href="classmathfu_1_1_quaternion.html">mathfu::Quaternion&lt;float&gt;</a> quaternion =</div>
<div class="line">    <a class="code" href="classmathfu_1_1_quaternion.html#a59928755b55306906b405db67222ee7e">mathfu::Quaternion&lt;float&gt;::FromEulerAngles</a>(</div>
<div class="line">        <a class="code" href="classmathfu_1_1_vector.html">mathfu::vec3</a>(M_PI / 2.0f, 0.0f, 0.0f));</div>
</div><!-- fragment --><p>Similarly, a quaternion can be constructed from an existing rotation matrix using:</p>
<div class="fragment"><div class="line"><span class="comment">// Assuming rotation_matrix is an existing matrix.</span></div>
<div class="line"><a class="code" href="classmathfu_1_1_quaternion.html">mathfu::Quaternion&lt;float&gt;</a> quaternion =</div>
<div class="line">    <a class="code" href="classmathfu_1_1_quaternion.html#afedab9d5094058f445f1be76d01677fa">mathfu::Quaternion&lt;float&gt;::FromMatrix</a>(rotation_matrix);</div>
</div><!-- fragment --><p>In addition, methods are provided to calculate an angle / axis pair, Euler angles, or rotation matrix from a <a class="el" href="classmathfu_1_1_quaternion.html">Quaternion</a>:</p>
<ul>
<li><a class="el" href="classmathfu_1_1_quaternion.html#a99686fa539f4218969e47f3580371de8">Quaternion::ToAngleAxis()</a></li>
<li><a class="el" href="classmathfu_1_1_quaternion.html#a44ddad110bef5ade3504c76d012994fe">Quaternion::ToEulerAngles()</a></li>
<li><a class="el" href="classmathfu_1_1_quaternion.html#afbd335bcd27c16f0e1d4b367a15490bf">Quaternion::ToMatrix()</a></li>
</ul>
<p>For example, to calculate the angle and axis from a <a class="el" href="classmathfu_1_1_quaternion.html">Quaternion</a>:</p>
<div class="fragment"><div class="line"><span class="comment">// Assuming &quot;quaternion&quot; is an existing float quaternion.</span></div>
<div class="line"><span class="keywordtype">float</span> angle;</div>
<div class="line"><a class="code" href="classmathfu_1_1_vector.html">mathfu::vec3</a> axis;</div>
<div class="line">quaternion.<a class="code" href="classmathfu_1_1_quaternion.html#a99686fa539f4218969e47f3580371de8">ToAngleAxis</a>(&amp;angle, &amp;axis);</div>
</div><!-- fragment --><p>To calculate a vector of Euler angles from a <a class="el" href="classmathfu_1_1_quaternion.html">Quaternion</a></p>
<div class="fragment"><div class="line"><span class="comment">// Assuming &quot;quaternion&quot; is an existing float quaternion.</span></div>
<div class="line"><a class="code" href="classmathfu_1_1_vector.html">mathfu::vec3</a> euler_angles = quaternion.<a class="code" href="classmathfu_1_1_quaternion.html#a44ddad110bef5ade3504c76d012994fe">ToEulerAngles</a>();</div>
</div><!-- fragment --><p>Finally, to convert a <a class="el" href="classmathfu_1_1_quaternion.html">Quaternion</a> to a rotation matrix:</p>
<div class="fragment"><div class="line"><span class="comment">// Assuming &quot;quaternion&quot; is an existing float quaternion.</span></div>
<div class="line"><a class="code" href="classmathfu_1_1_matrix.html">mathfu::Matrix&lt;float, 3&gt;</a> rotation_matrix = quaternion.<a class="code" href="classmathfu_1_1_quaternion.html#afbd335bcd27c16f0e1d4b367a15490bf">ToMatrix</a>();</div>
</div><!-- fragment --><h1><a class="anchor" id="mathfu_guide_quaternions_manipulation"></a>
Manipulation</h1>
<p><a class="el" href="classmathfu_1_1_quaternion.html">Quaternion</a> objects can be multiplied with each other to combine their rotations.</p>
<p>For example, if a quaternion that rotates by PI / 2 radians around the X axis is multiplied by itself it will result in a quaternion that rotates by PI radians around the X axis:</p>
<div class="fragment"><div class="line"><a class="code" href="classmathfu_1_1_quaternion.html">mathfu::Quaternion&lt;float&gt;</a> quaternion_pi_by_2_around_x =</div>
<div class="line">    <a class="code" href="classmathfu_1_1_quaternion.html#a6cbfc5dde67e0d0afe15d37e6af7e27b">mathfu::Quaternion&lt;float&gt;::FromAngleAxis</a>(</div>
<div class="line">        M_PI / 2.0f, <a class="code" href="classmathfu_1_1_vector.html">mathfu::vec3</a>(1.0f, 0.0f, 0.0f));</div>
<div class="line"><a class="code" href="classmathfu_1_1_quaternion.html">mathfu::Quaternion&lt;float&gt;</a> quaternion_pi_around_x =</div>
<div class="line">    quaternion_pi_by_2_around_x * quaternion_pi_by_2_around_x;</div>
</div><!-- fragment --><p>It's also possible to multiply a <a class="el" href="classmathfu_1_1_quaternion.html">Quaternion</a> with a scalar to scale the existing rotation expressed by the object.</p>
<p>For example, if a quaternion that rotates by PI / 2 radians around the X axis is multiplied by 2 it will result in a quaternion that rotates by PI radians around the X axis:</p>
<div class="fragment"><div class="line"><a class="code" href="classmathfu_1_1_quaternion.html">mathfu::Quaternion&lt;float&gt;</a> quaternion_pi_by_2_around_x =</div>
<div class="line">    <a class="code" href="classmathfu_1_1_quaternion.html#a6cbfc5dde67e0d0afe15d37e6af7e27b">mathfu::Quaternion&lt;float&gt;::FromAngleAxis</a>(</div>
<div class="line">        M_PI / 2.0f, <a class="code" href="classmathfu_1_1_vector.html">mathfu::vec3</a>(1.0f, 0.0f, 0.0f));</div>
<div class="line"><a class="code" href="classmathfu_1_1_quaternion.html">mathfu::Quaternion&lt;float&gt;</a> quaternion_pi_around_x =</div>
<div class="line">    quaternion_pi_by_2_around_x * 2.0f;</div>
</div><!-- fragment --><p>In addition, <a class="el" href="classmathfu_1_1_quaternion.html">Quaternion</a> provides the ability to perform <a href="http://en.wikipedia.org/wiki/Slerp">spherical linear interpolation</a> between two <a class="el" href="classmathfu_1_1_quaternion.html">Quaternion</a> objects enabling smooth transitions between rotations while avoiding <a href="http://en.wikipedia.org/wiki/Gimbal_lock">Gimbal lock</a>.</p>
<p>For example, the rotation half way between two quaternions can be calculated by the following:</p>
<div class="fragment"><div class="line"><span class="comment">// Assuming &quot;quaternion1&quot; and &quot;quaternion2&quot; represent arbitrary rotations.</span></div>
<div class="line"><a class="code" href="classmathfu_1_1_quaternion.html">mathfu::Quaternion&lt;float&gt;</a> quaternion3 =</div>
<div class="line">    <a class="code" href="classmathfu_1_1_quaternion.html">mathfu::Quaternion&lt;float&gt;</a>(quaternion1, quaternion2, 0.5f);</div>
</div><!-- fragment --><p>Finally, the inverse (opposite rotation) of a <a class="el" href="classmathfu_1_1_quaternion.html">Quaternion</a> is calculated using <a class="el" href="classmathfu_1_1_quaternion.html#a80357a821d4fd9b1f73a786e9b2dba83">Quaternion::Inverse()</a>. For example, if a <a class="el" href="classmathfu_1_1_quaternion.html">Quaternion</a> represents a rotation PI / 2 radians around the X axis the rotation -PI / 2 degrees around the X axis can be calculated by:</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <a class="code" href="classmathfu_1_1_quaternion.html">mathfu::Quaternion&lt;float&gt;</a> quaternion =</div>
<div class="line">    <a class="code" href="classmathfu_1_1_quaternion.html#a6cbfc5dde67e0d0afe15d37e6af7e27b">mathfu::Quaternion&lt;float&gt;::FromAngleAxis</a>(</div>
<div class="line">        M_PI / 2.0f, <a class="code" href="classmathfu_1_1_vector.html">mathfu::vec3</a>(1.0f, 0.0f, 0.0f));</div>
<div class="line"><a class="code" href="classmathfu_1_1_quaternion.html">mathfu::Quaternion&lt;float&gt;</a> inverse_rotation = quaternion.<a class="code" href="classmathfu_1_1_quaternion.html#a80357a821d4fd9b1f73a786e9b2dba83">Inverse</a>();</div>
</div><!-- fragment --><h1><a class="anchor" id="mathfu_guide_quaternions_application"></a>
Application</h1>
<p>A rotation expressed by a <a class="el" href="classmathfu_1_1_quaternion.html">Quaternion</a> is applied to a <a class="el" href="classmathfu_1_1_vector.html">Vector</a> by multipling the <a class="el" href="classmathfu_1_1_quaternion.html">Quaternion</a> with the <a class="el" href="classmathfu_1_1_vector.html">Vector</a>.</p>
<p>For example, to rotate a <a class="el" href="classmathfu_1_1_vector.html">Vector</a> by PI / 2 radians around the X axis:</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <a class="code" href="classmathfu_1_1_vector.html">mathfu::vec3</a> vector(0.0f, 1.0f, 0.0f);</div>
<div class="line"><span class="keyword">const</span> <a class="code" href="classmathfu_1_1_quaternion.html">mathfu::Quaternion&lt;float&gt;</a> quaternion =</div>
<div class="line">    <a class="code" href="classmathfu_1_1_quaternion.html#a6cbfc5dde67e0d0afe15d37e6af7e27b">mathfu::Quaternion&lt;float&gt;::FromAngleAxis</a>(</div>
<div class="line">        M_PI / 2.0f, <a class="code" href="classmathfu_1_1_vector.html">mathfu::vec3</a>(1.0f, 0.0f, 0.0f));</div>
<div class="line"><a class="code" href="classmathfu_1_1_vector.html">mathfu::vec3</a> rotated_vector = quaternion * vector;</div>
</div><!-- fragment --><p>When applying rotations to a large number of vectors or points (e.g transforming a set of vertices) it is easier to use <a class="el" href="classmathfu_1_1_quaternion.html#afbd335bcd27c16f0e1d4b367a15490bf">Quaternion::ToMatrix()</a> to calculate the rotation matrix and apply the same transform to the set of vectors.</p>
<p><br/>
 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-49880327-7', 'google.github.io');
ga('send', 'pageview');
</script>
</body>
</html>
